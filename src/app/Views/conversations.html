<app-header title="Kahla" i18n-title="@@Kahla" Button="true" ButtonIcon="search" RouterLink="/kahla/addfriend"></app-header>
<div id="main">
    <div class="conversation" *ngFor="let inf of cacheService.GetConversations()" (click)="talk(inf.conversationId)">
        <img class="user-img" src="{{inf.avatarURL ? inf.avatarURL : loadingImgURL}}?w=100&h=100" (click)="detail(inf)"/>
        <div *ngIf="cacheService.totalUnread > 0 && cacheService.totalUnread < 100" class="reddot">
            {{cacheService.totalUnread}}
        </div>
        <div *ngIf="cacheService.totalUnread > 99" class="reddot">
            99+
        </div>
        <div class="sender">
            {{inf.displayName}}
        </div>
        <div class="last-time">
            {{inf.latestMessageTime | date:'shortTime'}}
        </div>
        <div class="last-message" *ngIf="inf.latestMessage != null">
            {{inf.latestMessage}}
        </div>
        <div class="last-message" *ngIf="inf.latestMessage == null" i18n="@@NoMessage">
            No message. Start talking now!
        </div>
    </div>
</div>
<div class="holder"></div>
<app-nav></app-nav>
